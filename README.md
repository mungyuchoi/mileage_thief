# 마일리지도둑 (mileage_thief)

## 개요 및 목적

마일리지도둑은 항공권 마일리지 좌석을 쉽고 빠르게 검색할 수 있도록 도와주는 Flutter 기반의 앱/웹 서비스입니다. 다양한 항공사와 노선의 마일리지 좌석 정보를 한눈에 확인하고, 상세 정보를 제공하여 사용자들의 마일리지 활용을 극대화하는 것이 목적입니다.

## 주요 기능

- **항공권 마일리지 좌석 검색**  
  다양한 조건(항공사, 노선, 날짜 등)으로 마일리지 좌석을 검색할 수 있습니다.
- **상세 정보 제공**  
  검색 결과에서 각 항공권의 상세 마일리지 정보, 좌석 등급, 필요 마일리지, 세부 조건 등을 확인할 수 있습니다.

## 앱 탭 안내 (코드 기준)

아래 내용은 `lib/screen/search_screen.dart`의 하단 탭 구성과 각 화면 코드 기준으로 정리했습니다.

### 하단 탭

- 커뮤니티 / 특가 / 상품권 / 대한항공 / 설정

### 커뮤니티 탭

- 진입 화면: `CommunityScreen` (`lib/screen/community_screen.dart`)
- 드로어에서 게시판(카테고리) 선택, "전체글" 기본 제공
- 카드뷰/간단뷰 전환, 베스트 게시글 섹션, 알림/검색/콘테스트 바로가기 제공
- 레벨 제한: `deal`, `seats` 게시판은 이코노미 Lv.2 이상(비즈니스/퍼스트 포함)만 진입 가능

### 특가 탭

- 진입 화면: `DealsScreen` (`lib/screen/deals/deals_screen.dart`)
- 항공권 특가(`FlightDealsScreen`), 호텔 특가(`HotelDealsScreen`)로 이동
- 쇼핑몰 아이콘 선택 시 외부 브라우저로 이동  
  - 24시간 카운트다운 완료 상태에서 선택 시 땅콩 획득  
  - 획득 후 다시 24시간 대기, 쇼핑몰별 획득량 상이

### 상품권 탭

- 상단 세그먼트 탭: **정보 / 지도 / 시세** (`SearchScreen` 내 전용 탭)
- 정보: `GiftcardInfoScreen`  
  - 내부 탭: **대시보드 · 달력 · 일일 · 랭킹**  
  - 매입/판매 기록, KPI 요약, 캘린더/일일 기록, 랭킹 조회
- 지도: `GiftcardMapScreen`  
  - 지점 위치 마커, 월간 판매 데이터 기반 랭킹/상세  
  - 월 선택, 지점 랭킹/사용자 랭킹 보기
- 시세: `GiftcardRatesTab`  
  - 브랜드별 요약 시세(팔 때/살 때 최저·최고)  
  - 브랜드 상세 → 지점별 시세 상세  
  - 추천 대시보드: 선택한 상품권별 **“오늘 팔 때 가장 많이 쳐주는 지점 2곳”** 추천  
    - 진입 시 땅콩 20개 소모
- FAB(정보 탭 전용): 지점/카드/구매처 생성, 상품권 구매/판매  
  - 로그인 필요, 차단 상태면 숨김

### 대한항공 탭

- 진입 화면: `SearchDanScreen` (`lib/screen/dan_screen.dart`)
- 편도/왕복, 출발·도착지, 좌석 등급, 월 범위로 검색
- 검색 시 땅콩 소모: **편도 3개 / 왕복 5개**
- 광고 시청으로 땅콩 획득(+10 / +30)
- 취소표 알림 화면 제공

### 설정 탭

- 알림 토글(게시글/댓글/대댓글/댓글 좋아요), 로그인/계정, 버전 정보 등

## 커뮤니티 카테고리(기본값)와 역할

카테고리는 Firebase Realtime DB의 `CATEGORIES`에서 로드됩니다.  
서버 데이터가 없을 경우 `CategoryService._getDefaultBoards()` 기본값을 사용합니다.

- **전체글**: 모든 게시판의 글을 통합 표시(카테고리 목록과 별개)
- 글쓰기 버튼 노출 여부: `fabEnabled` 값으로 제어(관리자는 예외)
- 레벨 제한: `deal`, `seats` 게시판은 이코노미 Lv.2 이상만 진입 가능

| id | 이름 | 그룹 | 역할/설명 | 글쓰기 |
| --- | --- | --- | --- | --- |
| question | 마일리지 | 마일리지/혜택 | 마일리지, 항공사 정책, 발권 문의 등 | 가능 |
| deal | 적립/카드 혜택 | 마일리지/혜택 | 상테크, 카드 추천, 이벤트 정보 | 가능(Lv.2+) |
| seat_share | 좌석 공유 | 마일리지/혜택 | 좌석 오픈 알림, 취소표 공유 | 가능 |
| review | 항공 리뷰 | 여행/리뷰 | 라운지, 기내식, 좌석 후기 등 | 가능 |
| free | 자유게시판 | 여행/리뷰 | 일상, 후기, 질문 섞인 잡담 | 가능 |
| seats | 오늘의 좌석 | 마일리지/혜택 | 마일리지 비즈니스, 퍼스트 좌석 확인 | 제한(Lv.2+, 기본 글쓰기 비활성) |
| news | 오늘의 뉴스 | 마일리지/혜택 | 호텔, 카드, 라운지, 상테크, 마일리지 전략 | 제한(기본 글쓰기 비활성) |
| error_report | 오류 신고 | 운영/소통 | 앱/서비스 오류 제보 | 가능 |
| suggestion | 건의사항 | 운영/소통 | 사용자 의견, 개선 요청 | 가능 |
| notice | 운영 공지사항 | 운영/소통 | 관리자 공지, 업데이트 안내 | 제한(기본 글쓰기 비활성) |

## 마이페이지와 레벨 시스템 (코드 기준)

마이페이지는 `lib/screen/my_page_screen.dart`에서 제공되며,
상단 프로필/땅콩, 레벨, 스카이 이펙트, 광고 관리, 활동 탭을 포함합니다.

- 활동 탭: **게시글 / 댓글 / 리뷰 / 좋아요 / 북마크**
- 레벨 영역을 누르면 `LevelDetailScreen`으로 이동

### 레벨 산정 항목

- 게시글 수: `users/{uid}/my_posts`
- 댓글 수: `users/{uid}/my_comments`
- 좋아요 수: `users/{uid}/liked_posts`
- 땅콩 보유: `userProfile.peanutCount`
- 팔로워 수: `userProfile.followerCount`

### 레벨 규칙

모든 항목을 충족해야 승급 가능하며,  
**퍼스트 Lv.2는 운영자 승인**이 필요합니다.

#### 이코노미

| 레벨 | 게시글 | 댓글 | 좋아요 | 땅콩 | 팔로워 |
| --- | --- | --- | --- | --- | --- |
| Lv.1 | 0 | 0 | 0 | 0 | 0 |
| Lv.2 | 2 | 5 | 10 | 0 | 0 |
| Lv.3 | 5 | 15 | 20 | 0 | 0 |
| Lv.4 | 10 | 30 | 50 | 0 | 0 |
| Lv.5 | 20 | 50 | 100 | 0 | 0 |

#### 비즈니스

| 레벨 | 게시글 | 댓글 | 좋아요 | 땅콩 | 팔로워 |
| --- | --- | --- | --- | --- | --- |
| Lv.1 | 30 | 70 | 150 | 0 | 0 |
| Lv.2 | 40 | 100 | 250 | 0 | 0 |
| Lv.3 | 50 | 150 | 400 | 0 | 0 |
| Lv.4 | 70 | 200 | 600 | 0 | 0 |
| Lv.5 | 100 | 300 | 1000 | 0 | 0 |

#### 퍼스트

| 레벨 | 게시글 | 댓글 | 좋아요 | 땅콩 | 팔로워 |
| --- | --- | --- | --- | --- | --- |
| Lv.1 | 150 | 400 | 1500 | 500 | 30 |
| Lv.2 | 150 | 400 | 1500 | 500 | 30 (운영자 승인 필요) |

## 보조 기능 및 향후 고도화 아이디어

- **커뮤니티 기능**  
  사용자 간 질문, 정보 공유, 좌석 알림 등 커뮤니티 게시판(예정)
- **포인트 및 등급 시스템**  
  활동에 따른 포인트 적립, 등급별 혜택 제공(예정)
- **광고 리워드 및 출석 체크**  
  광고 시청, 출석 체크, 미션 등 다양한 리워드 기능(예정)
- **데이터 시계열 저장 및 분석**  
  좌석 데이터의 시계열 저장 및 추후 머신러닝/딥러닝 분석 활용(예정)

---

문의 및 기여: [프로젝트 운영진에게 문의]
