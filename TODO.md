# 🚀 Mileage Thief 커뮤니티 완성 로드맵

## 📊 현재 상태 (Current Status) - 2024.12.19 업데이트

### ✅ 완료된 기능 (Day 1 완성: ~80%)
- [x] 게시글 목록 표시 (CommunityScreen)
- [x] 무한 스크롤 (Infinite Scroll)
- [x] Pull-to-refresh 새로고침
- [x] 게시판 카테고리 시스템 (9개 카테고리)
- [x] 사용자 인증 시스템
- [x] Firebase Firestore 연동
- [x] **🔍 검색 기능 완전 구현** (community_search_screen.dart)
  - [x] 실시간 검색 (500ms debounce)
  - [x] 게시판별 필터링 (FilterChip)
  - [x] 검색어 하이라이팅 (연한 초록 배경)
  - [x] 제목/내용 검색, 최소 2글자
  - [x] 검색 결과 개수 표시
- [x] **🎨 브랜드 색상 통일** (베이지 → 갈색 그라데이션)
  - [x] 헤더, Drawer, FloatingActionButton
  - [x] 모든 로딩 프로그레스바 색상 통일
  - [x] 하단 탭바 및 전체 배경 흰색 통일
- [x] **👁️ 뷰 토글 기능** (카드뷰 ↔ 간단뷰)
  - [x] 헤더 토글 버튼 (view_list ↔ view_module)
  - [x] 2줄 간단뷰 레이아웃
  - [x] 구분선 및 간격 조정
- [x] **👤 프로필 이미지 문제 해결**
  - [x] photoURL/profileImageUrl fallback 로직
  - [x] 게시글 목록 및 Drawer 프로필 모두 적용
- [x] **📝 빈 상태 처리 개선**
  - [x] 로딩 상태와 빈 상태 분리
  - [x] "게시글이 없습니다" 메시지 표시

### ❌ 미완성 기능 (다음 우선순위)
- [ ] **📖 게시글 상세보기** (community_detail_screen.dart) ← **NEXT**
- [ ] 게시글 작성/수정/삭제
- [ ] 댓글 시스템 (설계 완료, 구현 필요)
- [ ] 좋아요/싫어요 기능
- [ ] 마이페이지 완성
- [ ] 등급 시스템 및 업그레이드 기능

---

## 🎯 **NEXT: 게시글 상세보기 구현** (최우선)

### 📖 CommunityDetailScreen 구현
- **파일**: `lib/screen/community_detail_screen.dart` (신규 생성)
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 게시글 전체 내용 표시
- [ ] 브랜드 색상 적용 (갈색 그라데이션)
- [ ] 작성자 프로필 정보 (프로필 이미지, 닉네임, 시간)
- [ ] 조회수/좋아요/댓글 수 표시
- [ ] 좋아요/싫어요 버튼 (UI만, 기능은 다음 단계)
- [ ] 댓글 영역 기본 레이아웃
- [ ] 뒤로가기 및 공유 버튼
- [ ] 로딩 상태 처리

**네비게이션 연결:**
- [ ] community_screen.dart에서 게시글 탭 시 상세보기로 이동
- [ ] 검색 결과에서도 상세보기 연결

---

## 🤝 2단계: 댓글 시스템 (설계 완료)

### 💬 댓글 시스템 구조 (확정)
**Database 구조:**
```json
comments/{commentId}: {
  "parentCommentId": null,        // 답글 관계 (null = 원댓글)
  "depth": 0,                     // 들여쓰기 레벨 (0 or 1만)
  "replyToUserId": null,          // 답글 대상 사용자
  "mentionedUsers": [],           // 멘션된 사용자들
  "hasMention": false,            // 멘션 포함 여부
  "content": "댓글 내용",
  "authorId": "작성자ID",
  "authorName": "작성자명",
  "profileImageUrl": "프로필URL",
  "timestamp": "작성시간",
  "likesCount": 0,
  "dislikesCount": 0
}
```

**UI 구조:**
1. **게시글 → 댓글** (0depth, 왼쪽 정렬)
2. **댓글 → 답글** (1depth, 우측 들여쓰기)
3. **답글 → 답글** (멘션 처리 @사용자명, 1depth 유지)

**구현 사항:**
- [ ] 댓글 작성/수정/삭제
- [ ] 답글 (대댓글) 기능 - 1depth 정책
- [ ] 멘션 기능 (@사용자명)
- [ ] **좋아요 5개 이상시 배경색 변경** (특수 UI 효과)
- [ ] 댓글 신고 (내 댓글: 수정/삭제, 남 댓글: 신고)
- [ ] 댓글 정렬 (최신순/인기순)
- [ ] 무한 스크롤 (댓글)

---

## 🎯 1단계: 핵심 기능 완성 (최우선)

### 1.1 검색 및 UI 개선 🔍
- **파일**: `lib/screen/community_screen.dart` (line 361)
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 검색 다이얼로그/페이지 구현
- [ ] 제목/내용 기반 실시간 검색
- [ ] 게시판별 필터링 검색
- [ ] 검색 결과 하이라이팅
- [ ] 최근 검색어 저장
- [ ] 카테고리 색상 커스터마이징
- [ ] 다크모드/라이트모드 토글
- [ ] 테마 색상 설정

### 1.2 게시글 상세보기 구현 📖
- **파일**: `lib/screen/community_detail_screen.dart`
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 4-5시간

**구현 사항:**
- [ ] 게시글 전체 내용 표시
- [ ] HTML 컨텐츠 렌더링
- [ ] 이미지 표시 및 확대
- [ ] 작성자 정보 표시
- [ ] 좋아요/싫어요 버튼
- [ ] 공유 기능
- [ ] 신고 기능

### 1.3 게시글 작성/수정 완성 ✍️
- **파일**: `lib/screen/community_post_create_screen.dart`
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 리치 텍스트 에디터 구현
- [ ] 이미지 업로드 기능
- [ ] 파일 첨부 기능
- [ ] 미리보기 기능
- [ ] 임시저장 기능
- [ ] 게시글 수정 기능
- [ ] 게시글 삭제 기능

---

## 🤝 2단계: 상호작용 기능

### 2.1 댓글 시스템 💬
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 10-12시간

**구현 사항:**
- [ ] 댓글 작성/수정/삭제
- [ ] 답글 (대댓글) 기능 - 1depth 정책
- [ ] 댓글 좋아요/싫어요
- [ ] **멘션 기능** (@사용자명)
- [ ] **좋아요 5개 이상시 배경색 변경** (특수 UI 효과)
- [ ] 댓글 신고 (내 댓글: 수정/삭제, 남 댓글: 신고)
- [ ] 댓글 정렬 (최신순/인기순)
- [ ] 무한 스크롤 (댓글)
- [ ] 댓글 알림 (멘션, 답글)

### 2.2 좋아요/싫어요 시스템 👍👎
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 게시글 좋아요/싫어요
- [ ] 댓글 좋아요/싫어요
- [ ] 실시간 카운트 업데이트
- [ ] 중복 방지 로직
- [ ] 애니메이션 효과

### 2.3 알림 시스템 🔔
- **우선순위**: ⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 댓글 알림
- [ ] 좋아요 알림
- [ ] 답글 알림
- [ ] 푸시 알림 (FCM)
- [ ] 알림 설정 관리

---

## ✨ 3단계: 사용자 경험 향상

### 3.1 미디어 처리 📸
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 5-6시간

**구현 사항:**
- [ ] 이미지 업로드/압축
- [ ] 동영상 업로드
- [ ] 파일 첨부
- [ ] 이미지 갤러리 뷰어
- [ ] 이미지 캐싱

### 3.2 마이페이지 완성 👤
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] **프로필 편집 기능**
  - [ ] 닉네임 수정
  - [ ] 프로필 사진 수정/업로드
  - [ ] 자기소개 편집
- [ ] **활동 내역**
  - [ ] 작성한 게시글 목록
  - [ ] 댓글 히스토리
  - [ ] 좋아요한 게시글
- [ ] **등급 시스템**
  - [ ] 현재 등급 표시
  - [ ] 등급별 혜택 설명
  - [ ] 다음 등급까지 진행도
- [ ] **소셜 기능**
  - [ ] 팔로우/팔로워 목록
  - [ ] 팔로잉 관리
- [ ] **샘플 및 코드** (마일리지 관련 정보?)
- [ ] **설정 메뉴**
  - [ ] 알림 설정
  - [ ] 테마 설정

### 3.3 북마크 시스템 📌
- **우선순위**: ⭐⭐
- **예상 시간**: 2-3시간

**구현 사항:**
- [ ] 게시글 북마크 추가/제거
- [ ] 북마크 목록 보기
- [ ] 폴더별 북마크 관리

---

## 🏆 4단계: 등급 시스템 및 정책

### 4.1 등급 시스템 구현 🎖️
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 5-6시간

**구현 사항:**
- [ ] **등급별 정책 설계**
  - [ ] 이코노미 Lv.1-5
  - [ ] 비즈니스 Lv.1-5  
  - [ ] 퍼스트 Lv.1-5
  - [ ] 등급별 권한 차등화
- [ ] **수동 등급 업그레이드 시스템**
  - [ ] 마이페이지 업그레이드 버튼
  - [ ] 등급 신청/승인 프로세스
  - [ ] 관리자 승인 시스템
- [ ] **등급별 혜택**
  - [ ] 게시글 작성 제한
  - [ ] 댓글 제한
  - [ ] 특별 배지 표시
  - [ ] 우선 지원

### 4.2 정책 관리 📋
- **우선순위**: ⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 등급별 사용 정책 문서
- [ ] 커뮤니티 가이드라인
- [ ] 등급 업그레이드 조건 명시
- [ ] 위반 시 등급 강등 정책

---

## 🛡️ 5단계: 관리 및 보안

### 5.1 신고 시스템 🚨
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 4-5시간

**구현 사항:**
- [ ] 게시글/댓글 신고
- [ ] 신고 사유 선택
- [ ] 관리자 신고 검토
- [ ] 자동 숨김 처리

### 5.2 관리자 기능 🔧
- **우선순위**: ⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 관리자 대시보드
- [ ] 게시글/댓글 관리
- [ ] 사용자 관리
- [ ] 신고 처리
- [ ] 공지사항 관리
- [ ] **등급 승인 관리** (신규 추가)

---

## 📅 **수정된 개발 스케줄** (4주 계획)

### ✅ Week 1 완료 (Day 1: ~80%)
- [x] 검색 기능 완전 구현
- [x] 브랜드 색상 통일
- [x] 뷰 토글 기능
- [x] 프로필 이미지 수정
- [x] 빈 상태 처리

### 🚀 Week 2: 게시글 상세 및 댓글 (현재 주)
- **Day 2**: 게시글 상세보기 구현 ← **지금 여기**
- Day 3-4: 댓글 시스템 기본 구현
- Day 5-6: 멘션 및 답글 기능
- Day 7: 좋아요/싫어요 시스템

### Week 3: 게시글 작성 및 마이페이지
- Day 1-3: 게시글 작성/수정/삭제
- Day 4-5: 마이페이지 기본 기능
- Day 6-7: 프로필 편집 및 활동 내역

### Week 4: 등급 시스템 및 마무리
- Day 1-3: 등급 시스템 구현
- Day 4-5: 관리자 기능 및 신고 시스템
- Day 6-7: 전체 테스트 및 배포 준비

---

## 🔧 기술적 고려사항

### 게시글 상세보기 필요 패키지
```yaml
dependencies:
  share_plus: ^7.0.0     # 공유 기능
  url_launcher: ^6.0.0   # 링크 열기
```

### 댓글 시스템 필요 패키지  
```yaml
dependencies:
  flutter_mentions: ^2.0.0       # 멘션 기능
```

---

## 🚀 **즉시 시작할 작업**

**NEXT STEP:**
1. [ ] **CommunityDetailScreen** 기본 구조 생성
2. [ ] 게시글 상세 데이터 로딩 로직
3. [ ] 브랜드 색상 적용된 UI 구현
4. [ ] community_screen.dart에서 네비게이션 연결

**완성 목표:** Week 2 Day 2 (오늘) - 게시글 상세보기 완성

---

*마지막 업데이트: 2024-12-19 Day 1 완료 후*
*작성자: AI Assistant* 