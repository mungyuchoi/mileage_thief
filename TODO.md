# 🚀 Mileage Thief 커뮤니티 완성 로드맵

## 📊 현재 상태 (Current Status) - 2024.12.25 업데이트

### ✅ 완료된 기능 (Day 1 완성: ~80%)
- [x] 게시글 목록 표시 (CommunityScreen)
- [x] 무한 스크롤 (Infinite Scroll)
- [x] Pull-to-refresh 새로고침
- [x] 게시판 카테고리 시스템 (8개 카테고리)
- [x] 사용자 인증 시스템
- [x] Firebase Firestore 연동
- [x] **🔍 검색 기능 완전 구현** (community_search_screen.dart)
  - [x] 실시간 검색 (500ms debounce)
  - [x] 게시판별 필터링 (FilterChip)
  - [x] 검색어 하이라이팅 (연한 초록 배경)
  - [x] 제목/내용 검색, 최소 2글자
  - [x] 검색 결과 개수 표시
- [x] **🎨 브랜드 색상 통일** (베이지 → 갈색 그라데이션)
  - [x] 헤더, Drawer, FloatingActionButton
  - [x] 모든 로딩 프로그레스바 색상 통일
  - [x] 하단 탭바 및 전체 배경 흰색 통일
- [x] **👁️ 뷰 토글 기능** (카드뷰 ↔ 간단뷰)
  - [x] 헤더 토글 버튼 (view_list ↔ view_module)
  - [x] 2줄 간단뷰 레이아웃
  - [x] 구분선 및 간격 조정
- [x] **👤 프로필 이미지 문제 해결**
  - [x] photoURL/profileImageUrl fallback 로직
  - [x] 게시글 목록 및 Drawer 프로필 모두 적용
- [x] **📝 빈 상태 처리 개선**
  - [x] 로딩 상태와 빈 상태 분리
  - [x] "게시글이 없습니다" 메시지 표시

### ✅ Day 2 완성된 기능
- [x] **📖 게시글 상세보기** (community_detail_screen.dart) 
  - [x] 샘플과 동일한 UI 구조
  - [x] 작성자 정보 및 등급 표시
  - [x] 좋아요/공유/더보기 기능
  - [x] 댓글 시스템 기본 구조
  - [x] **HTML 형식 댓글 지원**
  - [x] **이미지 첨부 기능** (image_picker + Firebase Storage)

### ✅ **Day 3 완성된 기능 (2024.12.25)** 🎉
- [x] **🎨 커뮤니티 스크린 UI 개선**
  - [x] 카테고리 순서 변경 (자유게시판 2번째로 이동)
  - [x] 게시판 이름에 LinearGradient 적용 (ShaderMask 사용)
  - [x] HTML 미리보기 개선 (<br> 태그 기준 첫 번째 텍스트만 표시)
- [x] **📖 게시글 상세보기 완전 완성**
  - [x] 앱바 제목 제거 (중복 방지)
  - [x] **삼성멤버스 스타일 레이아웃** (boardId → title → time|viewCount → profile + stats → content)
  - [x] title 여백 조정 (더 컴팩트)
  - [x] **🔗 링크 클릭 기능** (url_launcher + 외부 브라우저 열기)
  - [x] HTML <br> 태그 간격 처리 (8px/6px)
  - [x] **줄바꿈 유지** (whiteSpace: WhiteSpace.pre)
- [x] **💬 댓글 시스템 완전 완성**
  - [x] 댓글 등급 표시 수정 (실제 displayGrade 사용)
  - [x] **정렬 기능** (등록순/최신순 동적 변경)
  - [x] 드롭다운 배경색 하얀색
  - [x] **멘션 스타일링** (@사용자명 파란색 강조)
  - [x] 답글 기능 (1depth 정책)
  - [x] 이미지 첨부 기능
  - [x] 좋아요 기능 (게시글/댓글)
  - [x] HTML 렌더링 완성
  - [x] 계층 구조 정렬 (부모 댓글 → 답글 순서)

### ❌ 미완성 기능 (다음 우선순위)
- [ ] 게시글 작성 기능 고도화 (현재 기본 기능만 있음)
- [ ] 마이페이지 완성
- [ ] 등급 시스템 및 업그레이드 기능
- [ ] 알림 시스템

---

## 🎯 **NEXT: 게시글 작성 기능 고도화** (최우선)

### ✍️ CommunityPostCreateScreen 개선
- **파일**: `lib/screen/community_post_create_screen.dart` (기존 파일 개선)
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 4-6시간

**구현 사항:**
- [ ] 리치 텍스트 에디터 개선
- [ ] 이미지 업로드 UX 개선 (드래그 앤 드롭, 다중 선택)
- [ ] 미리보기 기능
- [ ] 임시저장 기능
- [ ] 게시글 수정 기능 개선
- [ ] 첨부파일 관리 개선

---

## 🤝 **완료된 댓글 시스템** ✅

### 💬 댓글 시스템 구조 (완성됨) - HTML 지원
**Database 구조:**
```json
comments/{commentId}: {
  "commentId": "cmt789",
  "uid": "user_abc",
  "displayName": "사용자명",
  "profileImageUrl": "프로필URL",
  "contentHtml": "<p>댓글 내용</p><img src='...' />",  // HTML 형식 지원
  "contentType": "html",          // 'text' 또는 'html' 구분
  "attachments": [                // 첨부파일 목록
    {
      "type": "image",
      "url": "https://storage.../posts/20241219/posts/postId123/comments/cmt789/images/cmt789_abc123.png",
      "filename": "screenshot.png"
    }
  ],
  "parentCommentId": null,        // 답글 관계 (null = 원댓글)
  "depth": 0,                     // 들여쓰기 레벨 (0 or 1만)
  "replyToUserId": null,          // 답글 대상 사용자
  "mentionedUsers": [],           // 멘션된 사용자들
  "hasMention": false,            // 멘션 포함 여부
  "createdAt": "timestamp",
  "updatedAt": "timestamp",
  "likesCount": 0,
  "isDeleted": false,
  "isHidden": false,
  "reportsCount": 0
}
```

**완성된 기능:**
- [x] 댓글 작성/수정/삭제
- [x] 답글 (대댓글) 기능 - 1depth 정책
- [x] 댓글 좋아요/싫어요
- [x] **멘션 기능** (@사용자명 파란색 스타일링)
- [x] 댓글 정렬 (등록순/최신순)
- [x] HTML 렌더링 및 이미지 첨부
- [x] 계층 구조 정렬

---

## 🎯 1단계: 핵심 기능 완성 (거의 완료)

### ✅ 1.1 검색 및 UI 개선 완료 🔍
- **파일**: `lib/screen/community_screen.dart`
- **상태**: ✅ **완료**

### ✅ 1.2 게시글 상세보기 완료 📖
- **파일**: `lib/screen/community_detail_screen.dart`
- **상태**: ✅ **완료**

### 🔄 1.3 게시글 작성/수정 개선 ✍️
- **파일**: `lib/screen/community_post_create_screen.dart`
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 4-6시간
- **상태**: 🔄 **기본 기능 완료, 고도화 필요**

---

## 🤝 2단계: 상호작용 기능

### ✅ 2.1 댓글 시스템 완료 💬
- **우선순위**: ⭐⭐⭐⭐
- **상태**: ✅ **완료**

### ✅ 2.2 좋아요/싫어요 시스템 완료 👍👎
- **우선순위**: ⭐⭐⭐
- **상태**: ✅ **완료**

### 🆕 2.3 알림 시스템 🔔
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 댓글 알림
- [ ] 좋아요 알림
- [ ] 답글 알림
- [ ] 푸시 알림 (FCM)
- [ ] 알림 설정 관리

---

## ✨ 3단계: 사용자 경험 향상

### 3.1 미디어 처리 📸
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [x] 이미지 업로드/압축 (기본 완료)
- [ ] 동영상 업로드
- [ ] 파일 첨부
- [ ] 이미지 갤러리 뷰어
- [ ] 이미지 캐싱

### 3.2 마이페이지 완성 👤
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] **프로필 편집 기능**
  - [ ] 닉네임 수정
  - [ ] 프로필 사진 수정/업로드
  - [ ] 자기소개 편집
- [ ] **활동 내역**
  - [ ] 작성한 게시글 목록
  - [ ] 댓글 히스토리
  - [ ] 좋아요한 게시글
- [ ] **등급 시스템**
  - [ ] 현재 등급 표시
  - [ ] 등급별 혜택 설명
  - [ ] 다음 등급까지 진행도
- [ ] **소셜 기능**
  - [ ] 팔로우/팔로워 목록
  - [ ] 팔로잉 관리
- [ ] **설정 메뉴**
  - [ ] 알림 설정
  - [ ] 테마 설정

---

## 🏆 4단계: 등급 시스템 및 정책

### 4.1 등급 시스템 구현 🎖️
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 5-6시간

**구현 사항:**
- [ ] **등급별 정책 설계**
  - [ ] 이코노미 Lv.1-5
  - [ ] 비즈니스 Lv.1-5  
  - [ ] 퍼스트 Lv.1-5
  - [ ] 등급별 권한 차등화
- [ ] **수동 등급 업그레이드 시스템**
  - [ ] 마이페이지 업그레이드 버튼
  - [ ] 등급 신청/승인 프로세스
  - [ ] 관리자 승인 시스템

---

## 🛡️ 5단계: 관리 및 보안

### 5.1 신고 시스템 🚨
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 4-5시간

**구현 사항:**
- [ ] 게시글/댓글 신고
- [ ] 신고 사유 선택
- [ ] 관리자 신고 검토
- [ ] 자동 숨김 처리

### 5.2 관리자 기능 🔧
- **우선순위**: ⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 관리자 대시보드
- [ ] 게시글/댓글 관리
- [ ] 사용자 관리
- [ ] 신고 처리
- [ ] 공지사항 관리

---

## 📅 **수정된 개발 스케줄** (4주 계획)

### ✅ Week 1 완료 (Day 1: ~80%)
- [x] 검색 기능 완전 구현
- [x] 브랜드 색상 통일
- [x] 뷰 토글 기능
- [x] 프로필 이미지 수정
- [x] 빈 상태 처리

### ✅ Week 2 완료: 게시글 상세 및 댓글 (2024.12.25 완성)
- **Day 2**: ✅ 게시글 상세보기 구현 완료 + HTML 댓글 + 이미지 첨부
- **Day 3**: ✅ 삼성멤버스 스타일 레이아웃 + 댓글 시스템 완전 완성 + 멘션 기능
- **Day 4-5**: ✅ 좋아요 시스템 + 정렬 기능 + HTML 렌더링 완성
- **Day 6-7**: ✅ 링크 클릭 + UI 개선 + 답글 시스템

### 🔄 Week 3: 게시글 작성 및 마이페이지 (다음 주)
- Day 1-2: 게시글 작성 기능 고도화
- Day 3-4: 알림 시스템 구현
- Day 5-7: 마이페이지 기본 기능

### Week 4: 등급 시스템 및 마무리
- Day 1-3: 등급 시스템 구현
- Day 4-5: 관리자 기능 및 신고 시스템
- Day 6-7: 전체 테스트 및 배포 준비

---

## 🔧 기술적 고려사항

### ✅ 완료된 패키지 설치
```yaml
dependencies:
  share_plus: ^7.0.0     # 공유 기능 ✅
  url_launcher: ^6.0.0   # 링크 열기 ✅
  flutter_html: ^3.0.0   # HTML 렌더링 ✅
  image_picker: ^1.0.0   # 이미지 선택 ✅
  firebase_storage: ^11.0.0  # 이미지 업로드 ✅
```

### 다음 필요 패키지
```yaml
dependencies:
  firebase_messaging: ^14.0.0   # 푸시 알림
  flutter_local_notifications: ^16.0.0  # 로컬 알림
```

---

## 🚀 **즉시 시작할 작업**

**NEXT STEP:**
1. [ ] **게시글 작성 기능 고도화** (리치 텍스트 에디터 개선)
2. [ ] **알림 시스템 구현** (댓글/좋아요 알림)
3. [ ] **마이페이지 기본 구조** 생성
4. [ ] **등급 시스템 설계** 문서화

**완성 목표:** Week 3 완료 (2024.12.31까지) - 게시글 작성 고도화 + 알림 + 마이페이지

---

## 🎉 **현재 성과**

### 📊 **전체 진행률: ~85%** 
- **핵심 기능**: ✅ 완료 (게시글 목록, 상세보기, 댓글 시스템)
- **사용자 경험**: 🔄 진행 중 (게시글 작성 고도화, 마이페이지)
- **고급 기능**: ⏳ 대기 중 (등급 시스템, 관리자 기능)

### 🏆 **주요 완성 기능**
1. **완전한 댓글 시스템** (답글, 멘션, 좋아요, 정렬)
2. **삼성멤버스급 UI/UX** (깔끔한 레이아웃)
3. **HTML 지원** (링크, 이미지, 서식)
4. **실시간 검색** (고급 필터링)

---

*마지막 업데이트: 2024-12-25 Day 3 완료 후*
*작성자: AI Assistant* 