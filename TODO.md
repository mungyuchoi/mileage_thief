# 🚀 Mileage Thief 커뮤니티 완성 로드맵

## 📊 현재 상태 (Current Status)

### ✅ 완료된 기능
- [x] 게시글 목록 표시 (CommunityScreen)
- [x] 무한 스크롤 (Infinite Scroll)
- [x] Pull-to-refresh 새로고침
- [x] 게시판 카테고리 시스템 (9개 카테고리)
- [x] 사용자 인증 시스템
- [x] Firebase Firestore 연동
- [x] 기본 UI/UX 디자인

### ❌ 미완성 기능
- [ ] 검색 기능 (UI만 있고 기능 없음)
- [ ] 게시글 상세보기
- [ ] 게시글 작성/수정/삭제
- [ ] 댓글 시스템 (멘션, 특수 UI 효과 포함)
- [ ] 좋아요/싫어요 기능
- [ ] 마이페이지 완성
- [ ] 등급 시스템 및 업그레이드 기능
- [ ] 테마/색상 설정

---

## 🎯 1단계: 핵심 기능 완성 (최우선)

### 1.1 검색 및 UI 개선 🔍
- **파일**: `lib/screen/community_screen.dart` (line 361)
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 검색 다이얼로그/페이지 구현
- [ ] 제목/내용 기반 실시간 검색
- [ ] 게시판별 필터링 검색
- [ ] 검색 결과 하이라이팅
- [ ] 최근 검색어 저장
- [ ] 카테고리 색상 커스터마이징
- [ ] 다크모드/라이트모드 토글
- [ ] 테마 색상 설정

### 1.2 게시글 상세보기 구현 📖
- **파일**: `lib/screen/community_detail_screen.dart`
- **우선순위**: ⭐⭐⭐⭐⭐
- **예상 시간**: 4-5시간

**구현 사항:**
- [ ] 게시글 전체 내용 표시
- [ ] HTML 컨텐츠 렌더링
- [ ] 이미지 표시 및 확대
- [ ] 작성자 정보 표시
- [ ] 좋아요/싫어요 버튼
- [ ] 공유 기능
- [ ] 신고 기능

### 1.3 게시글 작성/수정 완성 ✍️
- **파일**: `lib/screen/community_post_create_screen.dart`
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 리치 텍스트 에디터 구현
- [ ] 이미지 업로드 기능
- [ ] 파일 첨부 기능
- [ ] 미리보기 기능
- [ ] 임시저장 기능
- [ ] 게시글 수정 기능
- [ ] 게시글 삭제 기능

---

## 🤝 2단계: 상호작용 기능

### 2.1 댓글 시스템 💬
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 10-12시간

**구현 사항:**
- [ ] 댓글 작성/수정/삭제
- [ ] 답글 (대댓글) 기능 - 1depth 정책
- [ ] 댓글 좋아요/싫어요
- [ ] **멘션 기능** (@사용자명)
- [ ] **좋아요 5개 이상시 배경색 변경** (특수 UI 효과)
- [ ] 댓글 신고 (내 댓글: 수정/삭제, 남 댓글: 신고)
- [ ] 댓글 정렬 (최신순/인기순)
- [ ] 무한 스크롤 (댓글)
- [ ] 댓글 알림 (멘션, 답글)

### 2.2 좋아요/싫어요 시스템 👍👎
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 게시글 좋아요/싫어요
- [ ] 댓글 좋아요/싫어요
- [ ] 실시간 카운트 업데이트
- [ ] 중복 방지 로직
- [ ] 애니메이션 효과

### 2.3 알림 시스템 🔔
- **우선순위**: ⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 댓글 알림
- [ ] 좋아요 알림
- [ ] 답글 알림
- [ ] 푸시 알림 (FCM)
- [ ] 알림 설정 관리

---

## ✨ 3단계: 사용자 경험 향상

### 3.1 미디어 처리 📸
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 5-6시간

**구현 사항:**
- [ ] 이미지 업로드/압축
- [ ] 동영상 업로드
- [ ] 파일 첨부
- [ ] 이미지 갤러리 뷰어
- [ ] 이미지 캐싱

### 3.2 마이페이지 완성 👤
- **우선순위**: ⭐⭐⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] **프로필 편집 기능**
  - [ ] 닉네임 수정
  - [ ] 프로필 사진 수정/업로드
  - [ ] 자기소개 편집
- [ ] **활동 내역**
  - [ ] 작성한 게시글 목록
  - [ ] 댓글 히스토리
  - [ ] 좋아요한 게시글
- [ ] **등급 시스템**
  - [ ] 현재 등급 표시
  - [ ] 등급별 혜택 설명
  - [ ] 다음 등급까지 진행도
- [ ] **소셜 기능**
  - [ ] 팔로우/팔로워 목록
  - [ ] 팔로잉 관리
- [ ] **샘플 및 코드** (마일리지 관련 정보?)
- [ ] **설정 메뉴**
  - [ ] 알림 설정
  - [ ] 테마 설정

### 3.3 북마크 시스템 📌
- **우선순위**: ⭐⭐
- **예상 시간**: 2-3시간

**구현 사항:**
- [ ] 게시글 북마크 추가/제거
- [ ] 북마크 목록 보기
- [ ] 폴더별 북마크 관리

---

## 🏆 4단계: 등급 시스템 및 정책

### 4.1 등급 시스템 구현 🎖️
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 5-6시간

**구현 사항:**
- [ ] **등급별 정책 설계**
  - [ ] 이코노미 Lv.1-5
  - [ ] 비즈니스 Lv.1-5  
  - [ ] 퍼스트 Lv.1-5
  - [ ] 등급별 권한 차등화
- [ ] **수동 등급 업그레이드 시스템**
  - [ ] 마이페이지 업그레이드 버튼
  - [ ] 등급 신청/승인 프로세스
  - [ ] 관리자 승인 시스템
- [ ] **등급별 혜택**
  - [ ] 게시글 작성 제한
  - [ ] 댓글 제한
  - [ ] 특별 배지 표시
  - [ ] 우선 지원

### 4.2 정책 관리 📋
- **우선순위**: ⭐⭐
- **예상 시간**: 3-4시간

**구현 사항:**
- [ ] 등급별 사용 정책 문서
- [ ] 커뮤니티 가이드라인
- [ ] 등급 업그레이드 조건 명시
- [ ] 위반 시 등급 강등 정책

---

## 🛡️ 5단계: 관리 및 보안

### 5.1 신고 시스템 🚨
- **우선순위**: ⭐⭐⭐
- **예상 시간**: 4-5시간

**구현 사항:**
- [ ] 게시글/댓글 신고
- [ ] 신고 사유 선택
- [ ] 관리자 신고 검토
- [ ] 자동 숨김 처리

### 5.2 관리자 기능 🔧
- **우선순위**: ⭐⭐
- **예상 시간**: 6-8시간

**구현 사항:**
- [ ] 관리자 대시보드
- [ ] 게시글/댓글 관리
- [ ] 사용자 관리
- [ ] 신고 처리
- [ ] 공지사항 관리
- [ ] **등급 승인 관리** (신규 추가)

---

## 📅 개발 스케줄 제안 (5주 계획)

### Week 1: 핵심 기능
- Day 1-2: 검색 기능 + 테마/색상 토글 구현
- Day 3-5: 게시글 상세보기 구현 (공유/수정/삭제 포함)
- Day 6-7: 게시글 작성 기능 완성

### Week 2: 댓글 시스템 (고도화)
- Day 1-3: 기본 댓글 시스템 (작성/수정/삭제)
- Day 4-5: 멘션 기능 + 특수 UI 효과 (좋아요 5개 이상시 배경색 변경)
- Day 6-7: 답글 시스템 + 댓글 권한 관리

### Week 3: 마이페이지 완성
- Day 1-2: 프로필 편집 (닉네임/사진 수정)
- Day 3-4: 활동 내역 (게시글/댓글 히스토리)
- Day 5-6: 팔로우/팔로잉 시스템
- Day 7: 설정 메뉴 + 샘플 코드

### Week 4: 등급 시스템
- Day 1-3: 등급별 정책 설계 + 시스템 구현
- Day 4-5: 수동 업그레이드 시스템 (마이페이지 버튼)
- Day 6-7: 등급별 권한 차등화 적용

### Week 5: 관리 및 마무리
- Day 1-2: 신고 시스템 구현
- Day 3-4: 관리자 기능 (등급 승인 포함)
- Day 5-6: 전체 테스트 및 버그 수정
- Day 7: 배포 준비

---

## 🔧 기술적 고려사항

### 필요한 패키지
```yaml
dependencies:
  # 이미 있는 패키지들...
  flutter_quill: ^8.0.0  # 리치 텍스트 에디터
  image_picker: ^1.0.0   # 이미지 선택
  cached_network_image: ^3.3.0  # 이미지 캐싱
  firebase_storage: ^11.0.0     # 파일 저장
  firebase_messaging: ^14.0.0   # 푸시 알림
  share_plus: ^7.0.0     # 공유 기능
  url_launcher: ^6.0.0   # 링크 열기
  flutter_mentions: ^2.0.0       # 멘션 기능
  shared_preferences: ^2.0.0     # 테마/설정 저장
  provider: ^6.0.0               # 상태 관리
  image_cropper: ^5.0.0          # 프로필 이미지 크롭
  flutter_colorpicker: ^1.0.0    # 색상 선택기
```

### Database 구조 설계
```
posts/{date}/
  posts/{postId}/
    - 기본 게시글 정보
    - likesCount, viewsCount
    comments/{commentId}/
      - 댓글 정보
      - mentionedUsers: []  # 멘션된 사용자 목록
      - likesCount
      replies/{replyId}/
        - 답글 정보 (1depth만)

users/{userId}/
  - profile: 닉네임, 프로필사진, 등급, 자기소개
  - grade: 현재 등급, 신청 상태
  - settings: 테마, 알림 설정
  bookmarks/{postId}
  notifications/{notificationId}
  reports/{reportId}
  following/{userId}  # 팔로잉 목록
  followers/{userId}  # 팔로워 목록

gradeRequests/{requestId}/
  - userId, requestedGrade, status, timestamp
  
themes/{userId}/
  - 사용자별 테마 설정
```

---

## 🚀 다음 액션 아이템

**즉시 시작할 작업 (우선순위별):**
1. [ ] **검색 기능 + 테마 토글** 구현 (가장 빠른 Quick Win)
2. [ ] **CommunityDetailScreen** 기본 구조 생성
3. [ ] **필요한 패키지** dependency 추가
4. [ ] **등급별 정책** 설계 문서 작성
5. [ ] **마이페이지** 기본 레이아웃 구성

**질문사항:**
- **"샘플 및 코드"**가 구체적으로 무엇을 의미하는지?
- **등급별 권한 차등화** 범위는 어디까지인지? (게시글 수, 댓글 수 제한 등)
- **멘션 기능**에서 알림 전송 방식은? (실시간 vs 배치)
- **좋아요 5개 이상시 배경색 변경**은 댓글만? 게시글도?
- **팔로우 시스템**에서 비공개 프로필 기능이 필요한지?

**추가 고려사항:**
- 다크모드/라이트모드 외에 커스텀 테마 필요한지?
- 등급 업그레이드 승인 프로세스에 추가 서류/조건이 필요한지?

---

*마지막 업데이트: 2024-12-19*
*작성자: AI Assistant* 